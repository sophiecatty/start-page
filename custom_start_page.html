<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>My Start Page</title>
<style>
  body {
    margin: 0;
    padding: 40px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica;
    transition: background 0.3s, color 0.3s;
  }
  body.light { background: #f5f5f7; color: #333; }
  body.dark { background: #1c1c1e; color: #f5f5f7; }

  h1 { font-size: 28px; margin-bottom: 20px; }

  /* 搜索栏 */
  .search-bar {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
  }
  .search-input {
    flex: 1;
    padding: 12px 15px;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
  }
  .engine-select {
    padding: 12px;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
  }
  .search-btn {
    padding: 12px 20px;
    background: #007aff;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
  }

  /* 分组 */
  .group-title {
    font-size: 22px;
    margin: 30px 0 15px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 20px;
  }

  .card {
    background: rgba(255,255,255,0.8);
    border-radius: 18px;
    padding: 15px;
    height: 130px;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    transition: all 0.2s ease;
  }
  body.dark .card { background: #2c2c2e; }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 18px rgba(0,0,0,0.12);
  }

  a {
    text-decoration: none;
    color: inherit;
    font-size: 16px;
    margin-top: 10px;
  }

  /* 添加按钮 */
  #addBtn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    padding: 12px 20px;
    background: #007aff;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-size: 18px;
  }

  /* 深色模式切换 */
  #toggleMode {
    position: fixed;
    top: 20px;
    right: 30px;
    padding: 10px 16px;
    font-size: 14px;
    border-radius: 10px;
    border: 1px solid #ccc;
    cursor: pointer;
  }
</style>
</head>
<body class="light">

<h1>My Start Page</h1>

<!-- 搜索栏 -->
<div class="search-bar">
  <input class="search-input" id="searchInput" placeholder="搜索..." />
  <select class="engine-select" id="engineSelect">
    <option value="https://www.baidu.com/s?wd=">百度</option>
    <option value="https://www.bing.com/search?q=">必应</option>
    <option value="https://www.google.com/search?q=">Google</option>
  </select>
  <button class="search-btn" onclick="doSearch()">搜索</button>
</div>

<!-- 分组：工作区 -->
<h2 class="group-title">工作区</h2>
<div class="grid" id="workGrid"></div>

<!-- 分组：学习区 -->
<h2 class="group-title">学习区</h2>
<div class="grid" id="studyGrid"></div>

<!-- 分组：其他 -->
<h2 class="group-title">其他</h2>
<div class="grid" id="otherGrid"></div>

<button id="addBtn" onclick="addLink()">添加网站</button>
<button id="toggleMode" onclick="toggleMode()">切换深色模式</button>

<script>
// 搜索功能
function doSearch() {
  const q = document.getElementById('searchInput').value;
  const eng = document.getElementById('engineSelect').value;
  if (q.trim()) window.open(eng + encodeURIComponent(q));
}

// 深色模式
function toggleMode() {
  const body = document.body;
  if (body.classList.contains('light')) {
    body.className = 'dark';
    localStorage.setItem('theme', 'dark');
  } else {
    body.className = 'light';
    localStorage.setItem('theme', 'light');
  }
}

// 读取主题
(function(){
  const t = localStorage.getItem('theme') || 'light';
  document.body.className = t;
})();

// 链接分组结构
const grids = {
  work: document.getElementById('workGrid'),
  study: document.getElementById('studyGrid'),
  other: document.getElementById('otherGrid')
};

function loadLinks() {
  const data = JSON.parse(localStorage.getItem('mylinks') || '[]');
  Object.values(grids).forEach(g => g.innerHTML = '');

  data.forEach((item, i) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<img src="https://www.google.com/s2/favicons?sz=64&domain=${item.url}"><a href="${item.url}" target="_blank">${item.name}</a>`;
    card.onclick = (e)=>{
      if (e.shiftKey) {
        data.splice(i,1);
        localStorage.setItem('mylinks', JSON.stringify(data));
        loadLinks();
      }
    };
    grids[item.group].appendChild(card);
  });
}
loadLinks();

function addLink() {
  const name = prompt('网站名称：');
  const url = prompt('网站链接（https:// 开头）：');
  const group = prompt('分组：(work / study / other)');
  if (!name || !url || !group) return;

  const data = JSON.parse(localStorage.getItem('mylinks') || '[]');
  data.push({name, url, group});
  localStorage.setItem('mylinks', JSON.stringify(data));
  loadLinks();
}
</script>

</body>
</html>
